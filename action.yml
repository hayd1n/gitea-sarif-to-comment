name: 'Gitea SARIF to Comment'
description: 'Post SARIF security scan results to Gitea Pull Request comments'
author: 'Hayden Chang'
branding:
  icon: 'message-square'
  color: 'purple'

inputs:
  sarif-file:
    description: 'Path to the SARIF file'
    required: true
    default: 'scan_results.sarif'
  token:
    description: 'Gitea/GitHub Token'
    required: true
    default: ${{ github.token }}
  title:
    description: 'Title of the comment'
    required: false
    default: 'ğŸ›¡ï¸ Security Scan Results'

runs:
  using: 'composite'
  steps:
    - name: Run SARIF Comment Script
      shell: bash
      # ä½¿ç”¨ ${{ github.action_path }} ç¢ºä¿å¼•ç”¨åˆ° Action Repo å…§çš„æª”æ¡ˆ
      run: node "${{ github.action_path }}/sarif-to-comment.js"
      env:
        # å°‡ inputs å‚³éçµ¦ç’°å¢ƒè®Šæ•¸
        INPUT_SARIF_FILE: ${{ inputs.sarif-file }}
        INPUT_TOKEN: ${{ inputs.token }}
        INPUT_TITLE: ${{ inputs.title }}
        # Gitea Runner è‡ªå‹•æä¾›çš„è®Šæ•¸
        GITHUB_API_URL: ${{ github.api_url }}
        GITHUB_REPOSITORY: ${{ github.repository }}
        GITHUB_EVENT_PATH: ${{ github.event_path }}